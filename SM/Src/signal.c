/*.$file${./SM/Src::signal.c} vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv*/
/*
* Model: lamp.qm
* File:  ${./SM/Src::signal.c}
*
* This code has been generated by QM 5.1.4 <www.state-machine.com/qm/>.
* DO NOT EDIT THIS FILE MANUALLY. All your changes will be lost.
*
* This program is open source software: you can redistribute it and/or
* modify it under the terms of the GNU General Public License as published
* by the Free Software Foundation.
*
* This program is distributed in the hope that it will be useful, but
* WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
* or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
* for more details.
*/
/*.$endhead${./SM/Src::signal.c} ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^*/
#include "signal.h"



/*.$skip${QP_VERSION} vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv*/
/*. Check for the minimum required QP version */
#if (QP_VERSION < 690U) || (QP_VERSION != ((QP_RELEASE^4294967295U) % 0x3E8U))
#error qpc version 6.9.0 or higher required
#endif
/*.$endskip${QP_VERSION} ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^*/
/*.$define${LampSM} vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv*/
/*.${LampSM::Lamp} .........................................................*/
/*.${LampSM::Lamp::pushSwitch} .............................................*/
void Lamp_pushSwitch(Lamp * const me) {
    QEvt e;
    e.sig = (QSignal)SOFT_CLICK_SIG;
    QHSM_DISPATCH(&me->super, &e, 0 );
}

/*.${LampSM::Lamp::ctor} ...................................................*/
void Lamp_ctor(Lamp * const me) {
    QHsm_ctor(&me->super, Q_STATE_CAST(&Lamp_initial));
}

/*.${LampSM::Lamp::holdSwitch} .............................................*/
void Lamp_holdSwitch(Lamp * const me) {
    QEvt e;
    e.sig = (QSignal)HARD_CLICK_SIG;
    QHSM_DISPATCH(&me->super, &e, 0 );
}

/*.${LampSM::Lamp::blink} ..................................................*/
void Lamp_blink(Lamp * const me) {
        QEvt e;
        e.sig = (QSignal)BLINK_SIG;
        QHSM_DISPATCH(&me->super, &e, 0 );
}

/*.${LampSM::Lamp::SM} .....................................................*/
QState Lamp_initial(Lamp * const me, void const * const par) {
    /*.${LampSM::Lamp::SM::initial} */
    /* state history attributes */
    me->hist_LED_RED = Q_STATE_CAST(&Lamp_RED_BLINK);
    me->hist_LED_GREEN = Q_STATE_CAST(&Lamp_GREEN_BLINK);
    return Q_TRAN(&Lamp_LED_RED);
}
/*.${LampSM::Lamp::SM::LED_RED} ............................................*/
QState Lamp_LED_RED(Lamp * const me, QEvt const * const e) {
    QState status_;
    switch (e->sig) {
        /*.${LampSM::Lamp::SM::LED_RED} */
        case Q_ENTRY_SIG: {
            APP_RED_LED_ON();
            status_ = Q_HANDLED();
            break;
        }
        /*.${LampSM::Lamp::SM::LED_RED} */
        case Q_EXIT_SIG: {
            APP_RED_LED_OFF();
            /* save deep history */
            me->hist_LED_RED = QHsm_state(Q_HSM_UPCAST(me));
            status_ = Q_HANDLED();
            break;
        }
        /*.${LampSM::Lamp::SM::LED_RED::SOFT_CLICK} */
        case SOFT_CLICK_SIG: {
            status_ = Q_TRAN_HIST(me->hist_LED_GREEN);
            break;
        }
        /*.${LampSM::Lamp::SM::LED_RED::HARD_CLICK} */
        case HARD_CLICK_SIG: {
            status_ = Q_TRAN(&Lamp_RED_BLINK);
            break;
        }
        default: {
            status_ = Q_SUPER(&QHsm_top);
            break;
        }
    }
    return status_;
}
/*.${LampSM::Lamp::SM::LED_RED::RED_BLINK} .................................*/
QState Lamp_RED_BLINK(Lamp * const me, QEvt const * const e) {
    QState status_;
    switch (e->sig) {
        /*.${LampSM::Lamp::SM::LED_RED::RED_BLINK::SOFT_CLICK} */
        case SOFT_CLICK_SIG: {
            status_ = Q_TRAN_HIST(me->hist_LED_GREEN);
            break;
        }
        /*.${LampSM::Lamp::SM::LED_RED::RED_BLINK::HARD_CLICK} */
        case HARD_CLICK_SIG: {
            status_ = Q_TRAN(&Lamp_LED_RED);
            break;
        }
        /*.${LampSM::Lamp::SM::LED_RED::RED_BLINK::BLINK} */
        case BLINK_SIG: {
            APP_RED_LED_BLINK();
            status_ = Q_HANDLED();
            break;
        }
        default: {
            status_ = Q_SUPER(&Lamp_LED_RED);
            break;
        }
    }
    return status_;
}
/*.${LampSM::Lamp::SM::LED_GREEN} ..........................................*/
QState Lamp_LED_GREEN(Lamp * const me, QEvt const * const e) {
    QState status_;
    switch (e->sig) {
        /*.${LampSM::Lamp::SM::LED_GREEN} */
        case Q_ENTRY_SIG: {
            APP_GREEN_LED_ON();
            status_ = Q_HANDLED();
            break;
        }
        /*.${LampSM::Lamp::SM::LED_GREEN} */
        case Q_EXIT_SIG: {
            APP_GREEN_LED_OFF();
            /* save deep history */
            me->hist_LED_GREEN = QHsm_state(Q_HSM_UPCAST(me));
            status_ = Q_HANDLED();
            break;
        }
        /*.${LampSM::Lamp::SM::LED_GREEN::SOFT_CLICK} */
        case SOFT_CLICK_SIG: {
            status_ = Q_TRAN_HIST(me->hist_LED_RED);
            break;
        }
        /*.${LampSM::Lamp::SM::LED_GREEN::HARD_CLICK} */
        case HARD_CLICK_SIG: {
            status_ = Q_TRAN(&Lamp_GREEN_BLINK);
            break;
        }
        default: {
            status_ = Q_SUPER(&QHsm_top);
            break;
        }
    }
    return status_;
}
/*.${LampSM::Lamp::SM::LED_GREEN::GREEN_BLINK} .............................*/
QState Lamp_GREEN_BLINK(Lamp * const me, QEvt const * const e) {
    QState status_;
    switch (e->sig) {
        /*.${LampSM::Lamp::SM::LED_GREEN::GREEN_BLINK::BLINK} */
        case BLINK_SIG: {
            APP_GREEN_LED_BLINK();
            status_ = Q_HANDLED();
            break;
        }
        /*.${LampSM::Lamp::SM::LED_GREEN::GREEN_BLINK::HARD_CLICK} */
        case HARD_CLICK_SIG: {
            status_ = Q_TRAN(&Lamp_LED_GREEN);
            break;
        }
        /*.${LampSM::Lamp::SM::LED_GREEN::GREEN_BLINK::SOFT_CLICK} */
        case SOFT_CLICK_SIG: {
            status_ = Q_TRAN_HIST(me->hist_LED_RED);
            break;
        }
        default: {
            status_ = Q_SUPER(&Lamp_LED_GREEN);
            break;
        }
    }
    return status_;
}
/*.$enddef${LampSM} ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^*/
